!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():e.Rellax=t()}(this,function(){var e=function(t,n){var o=Object.create(e.prototype),r=0,s=0,i=[],a=!1,l=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(e){setTimeout(e,1e3/60)};if(o.options={speed:-2,center:!1},n&&Object.keys(n).forEach(function(e){o.options[e]=n[e]}),-10>o.options.speed?o.options.speed=-10:10<o.options.speed&&(o.options.speed=10),t||(t=".rellax"),document.getElementsByClassName(t.replace(".","")))o.elems=document.getElementsByClassName(t.replace(".",""));else{if(!1===document.querySelector(t))throw Error("The elements you're trying to select don't exist.");o.elems=querySelector(t)}var d=function(e){var t=e.getAttribute("data-rellax-percentage")||o.options.center?document.body.scrollTop:0,n=t+e.getBoundingClientRect().top,r=e.clientHeight||e.offsetHeight||e.scrollHeight,i=e.getAttribute("data-rellax-percentage")?e.getAttribute("data-rellax-percentage"):(t-n+s)/(r+s);o.options.center&&(i=.5),t=e.getAttribute("data-rellax-speed")?c(e.getAttribute("data-rellax-speed"),10):o.options.speed,(e.getAttribute("data-rellax-percentage")||o.options.center)&&(t=e.getAttribute("data-rellax-speed")?c(e.getAttribute("data-rellax-speed"),5):c(o.options.speed,5)),i=Math.round(100*t*(1-i)),e=e.style.cssText;var a="";if(0<=e.indexOf("transform"))var a=e.indexOf("transform"),a=e.slice(a),l=a.indexOf(";"),a=l?" "+a.slice(11,l).replace(/\s/g,""):" "+a.slice(11).replace(/\s/g,"");return{base:i,top:n,height:r,speed:t,style:e,transform:a}},c=function(e,t){return e<-t?-t:e>t?t:e},u=function(){var e=r;return r=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop,e!=r},p=function(){u()&&!1===a&&m(),l(p)},m=function(){for(var e=0;e<o.elems.length;e++){var t=" translate3d(0,"+(Math.round(100*i[e].speed*(1-(r-i[e].top+s)/(i[e].height+s)))-i[e].base)+"px,0)"+i[e].transform;o.elems[e].style.cssText=i[e].style+"-webkit-transform:"+t+";-moz-transform:"+t+";transform:"+t+";"}};return o.destroy=function(){for(var e=0;e<o.elems.length;e++)o.elems[e].style.cssText=i[e].style;a=!0},function(){s=window.innerHeight,u();for(var e=0;e<o.elems.length;e++){var t=d(o.elems[e]);i.push(t)}window.addEventListener("resize",function(){m()}),p(),m()}(),o};return e});