{#
 # Homepage template
 # ---------------
 #
 # See this page for details on how Craft routes requests:
 # http://craftcms.com/docs/routing
 #}

{% extends "_layouts/base" %}

{% import '_includes/elements' as elements %}
{% import '_includes/helpers' as helpers %}

{% block critical %}
  <style>
    {{ source(_self ~ '.min.css', ignore_missing = true) }}
  </style>
{% endblock %}

{% block main %}
  {% cache %}
  {% minify %}

  {# -- HERO -- #}
  <article>
    <header class="hero">
      <div class="hero-content mw-large ta-center">
        <div class="hero-text w100">
          <h1 class="ts-title1">{{ entry.title }}</h1>
        </div>
      </div>
    </header>

    {# -- PROJECTS -- #}
    {% set projects = craft.entries.section('creating').all() %}
    {% set lazyImage = false %}

    {% if projects %}
      <div class="mw-large">
        {% for project in projects %}
          <section class="w100 mv4 ff-sans">
            <div class="mv2 r16-9">
              <a class="project-background" {% if project.color and project.color != '#000000' %}style="background-color: {{ project.color }}"{% endif %} href="{{ project.url }}" title="{{ project.title }}">

                {% set images = project.images %}

                {% if images %}
                  {% for image in images %}
                    <div class="crd project-image">
                      {% if lazyImage %}
                        <img class="lazyload"
                             src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="
                             data-sizes="auto"
                             data-srcset="{{ image.getUrl('medium') }} {{ image.getWidth('medium') }}w, {{ image.getUrl('small') }} {{ image.getWidth('small') }}w"
                             alt="{{ image.title }}">
                      {% else %}
                        <img class="img-responsive"
                             src="{{ image.getUrl('medium') }}"
                             sizes="20vw"
                             srcset="{{ image.getUrl('medium') }} {{ image.getWidth('medium') }}w, {{ image.getUrl('small') }} {{ image.getWidth('small') }}w"
                             alt="{{ image.title }}">
                      {% endif %}
                    </div>
                  {% endfor %}
                {% endif %}
              </a>
            </div>
            <p class="mb1 ts-app">{{ project.client.one().title }}</p>
            <h3 class="ts-title3"><a href="{{ project.url }}" title="{{ project.title }}">{{ project.title }}</a></h3>
          </section>
          {% set lazyImage = true %}
        {% endfor %}
      </div>
    {% endif %}

  </article>

  {% endminify %}
  {% endcache %}
{% endblock %}
