{#
 # The base layout template
 # ------------------------
-#}

{# -- DRY -- #}
{% set baseUrl = craft.app.config.getGeneral.baseUrl %}
{% set devMode = craft.app.config.getGeneral.devMode %}
{% set livePreview = craft.app.request.isLivePreview %}

<!doctype html>
<html amp lang="{{ craft.app.language }}" class="fonts-loaded">

{% cache %}
<head>

{% block head %}
  <meta charset="utf-8">
  <script async src="https://cdn.ampproject.org/v0.js"></script>
  <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">

  {# -- AMP DEFAULT -- #}
  <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>

  {# -- AMP CUSTOM -- #}
  <style amp-custom>
    {{ source('_layouts/amp.min.css') }}
    {% block custom %}{% endblock %}
  </style>

  {# -- TITLE -- #}
  <title>{% if entry is defined %}{{ entry.title }} - {% endif %}{{ siteName | split('Â·') | first }}</title>

  {# -- SEOMATIC -- #}
  {% hook 'seomaticRender' %}

  {# -- ICONS -- #}
  {% include '_includes/icons' %}

  {# -- PRECONNECT -- #}
  {% for block in navigation.navigation %}
    {% if block.type == "navSingle" or block.type == "navSection" %}
      {% set navLink = block.navEntry.one().url %}
    {% elseif block.type == "navExternal" %}
      {% set navLink = block.navLink %}
    {% endif %}

    <link rel="preconnect" href="{{ navLink }}">
  {% endfor %}

  <link rel="canonical" href="{{ entry.url | replace('/amp', '') }}" />
  <link rel="home" href="{{ siteUrl }}" />
  <link rel="alternate" type="application/atom+xml" title="Atom" href="/feed.atom">
{% endblock %}

</head>
{% endcache %}

{# -- BODY CLASS -- #}
<body class="{% if entry is defined %}{% if entry.colors and entry.colors.type('color').one() %}has-color{% elseif entry.image and entry.image.one() %}has-image{% endif %}{% endif %} {{ entry is defined ? entry.section.handle : craft.app.request.segments | first }}">

{% block body %}

  {# -- METABAR -- #}
  {% include '_includes/metabar' %}

  <main id="main" class="main" role="main">

    {% block main %}{% endblock %}

  </main>

  {# -- FOOTER -- #}
  {% include '_includes/footer' %}

{% endblock %}

</body>
</html>
