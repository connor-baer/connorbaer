"use strict";!function(){function e(e,n,t){caches.open(e).then(function(e){return e.put(n,t)})}function n(){return caches.open(a).then(function(e){return e.addAll(s.map(function(e){return new Request(e,{credentials:"same-origin"})}))}),caches.open(a).then(function(e){return e.addAll(staticAssets.map(function(e){return new Request(e,{credentials:"same-origin"})}))})}function t(e,n){caches.open(e).then(function(i){i.keys().then(function(c){c.length>n&&i.delete(c[0]).then(t(e,n))})})}function i(){return caches.keys().then(function(e){return Promise.all(e.filter(function(e){return 0!==e.indexOf(c)}).map(function(e){return caches.delete(e)}))})}var c="cb1.0::",a=c+"static",r=c+"pages",f=c+"images",s=["/offline","/creating/","/writing","/eating","/"];self.addEventListener("install",function(e){e.waitUntil(n().then(function(){return self.skipWaiting()}))}),self.addEventListener("activate",function(e){e.waitUntil(i().then(function(){return self.clients.claim()}))}),self.addEventListener("message",function(e){"trimCaches"===e.data.command&&(t(r,35),t(f,20))}),self.addEventListener("fetch",function(n){var t=n.request,i=new URL(t.url);if(t.url.indexOf("google-analytics")===-1&&"GET"===t.method)return t.headers.get("Accept").indexOf("text/html")!==-1?void n.respondWith(fetch(t).then(function(n){var c=n.clone();return s.includes(i.pathname)||s.includes(i.pathname+"/")?e(a,t,c):e(r,t,c),n}).catch(function(){return caches.match(t).then(function(e){return e||caches.match("/offline.html")})})):void n.respondWith(caches.match(t).then(function(n){return n||fetch(t).then(function(n){if(t.headers.get("Accept").indexOf("image")!==-1){var i=n.clone();e(f,t,i)}return n}).catch(function(){if(t.headers.get("Accept").indexOf("image")!==-1)return new Response('<svg role="img" aria-labelledby="offline-title" viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg"><title id="offline-title">Offline</title><g fill="none" fill-rule="evenodd"><path fill="#D8D8D8" d="M0 0h400v300H0z"/><text fill="#9B9B9B" font-family="Helvetica Neue,Arial,Helvetica,sans-serif" font-size="72" font-weight="bold"><tspan x="93" y="172">offline</tspan></text></g></svg>',{headers:{"Content-Type":"image/svg+xml"}})})}))})}();
//# sourceMappingURL=sw.min.min.js.map
